window.__require=function e(t,i,n){function a(s,r){if(!i[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){return a(t[s][1][e]||e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t){var i=e("./package.json").version,n="en",a="jp",o={jp:{play:"\u30b9\u30bf\u30fc\u30c8"},en:{play:"Play Now!"}},s=500;function r(){console.log("H5ad v"+i),this._isInitialised=!1,this._splashAdShown=!1}function l(e){for(var t in e=e||{})void 0===e[t]&&delete e[t];return e}function c(e,t){console.error(e),(t=t||{}).noBreak?t.noBreak():(t.beforeBreak&&t.beforeBreak(),t.afterBreak&&t.afterBreak())}function u(){if(!navigator.language)return a;var e=navigator.language.toLowerCase().substr(0,2);return o[e]?e:n}r.prototype.initialize=function(e){if(this._isInitialised)console.warn("h5ad: already initialized");else{this._isInitialised=!0,e&&void 0!==e.adBreakTimeout&&(s=e.adBreakTimeout),adConfig=window.adConfig=function(){};var t=document.createElement("script");t.src="https://html5gameportal.com/embeds/wortal-1.0.0.js",t.async=!0,document.head.appendChild(t),t.addEventListener("load",()=>{window.initWortal(function(){adConfig({preloadAdBreaks:"on",sound:"on"}),console.log("Wortal setup complete!")})})}},r.prototype.onStart=function(e){if(e=e||{},this._isInitialised||this.initialize({adBreakTimeout:e.adBreakTimeout}),this._splashAdShown)console.warn("h5ad: onStart has already been called");else{this._splashAdShown=!0;var t="";t+=".splahContainer {",t+="    background-color: black;",t+="    position: absolute;",t+="    width: 100%;",t+="    height: 100%;",t+="    text-align: left;",t+="}",t+=".splahContainer .gameIcon {",t+="    position: relative;",t+="    width: 100px;",t+="    height: 100px;",t+="    background-size: 100%;",t+="    transform: translate(-50%, -100%);",t+="    left: 50%;",t+="    top: 31%;",t+="    border-radius: 10px;",t+="    border: 2px white solid;",t+="    border-radius: min(2vh,2vw);",t+="    border: min(0.7vw, 0.7vh) white solid;",t+="    width: min(30vw, 20vh);",t+="    height: min(30vw, 20vh);",t+="}",t+=".splahContainer .startButton {",t+="    background-color: rgb(255, 193, 7);",t+="    padding: 20px 30px;",t+="    border-radius: 13px;",t+="    transform: translate(-50%, 100%);",t+="    left: 50%;",t+="    top: 40%;",t+="    border: 5px solid white;",t+="    position: relative;",t+="    cursor: pointer;",t+="    font-size: 26px;",t+="    font-family: arial, verdana;",t+="    color: white;",t+="    text-align: center;",t+="    transition: all 0.1s;",t+="    width: min(50vw,27vh);",t+="    padding: min(3vw,3vh);",t+="    font-size: min(4vh,9vw);",t+="    border-radius: min(2vh,2vw);",t+="    border: min(1vw, 1vh) white solid;",t+="}",t+=".splahContainer .startButton:hover {",t+="    transform: translate(-50%, 100%) scale(1.1);",t+="    background-color: rgb(255 217 104);",t+="}";var i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(i);var n=document.createElement("div");e.color&&(n.style.backgroundColor=e.color),n.className="splahContainer";var a=document.createElement("div");a.textContent=o[u()].play,a.className="startButton",n.appendChild(a);var r=document.createElement("div");r.className="gameIcon",e.icon&&(r.style.backgroundImage="url("+e.icon+")"),n.appendChild(r),document.body.appendChild(n),a.onclick=function(){afterBreakCallbackCalled=!1;var t=setTimeout(function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())},s);try{adBreak(l({type:"start",name:e.name||"splash_screen",beforeAd:function(){clearTimeout(t)},afterAd:function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())}}))}catch(i){c(i,e)}setTimeout(function(){document.body.removeChild(n)},200)}}},r.prototype.onNext=function(e){(e=e||{}).type="next",this.adBreak(e)},r.prototype.onBrowse=function(e){(e=e||{}).type="browse",this.adBreak(e)},r.prototype.onPause=function(e){(e=e||{}).type="pause",this.adBreak(e)},r.prototype.onReward=function(e){(e=e||{}).type="reward",this.adBreak(e)},r.prototype.adBreak=function(e){var t,i=(e=e||{}).type;if(-1===["next","browse","pause","reward"].indexOf(i))return console.error("H5ad: unknown type",i);t=setTimeout(function(){e.noBreak&&e.noBreak()},s);try{adBreak(l({type:i,name:e.name||i,beforeAd:function(){t&&clearTimeout(t),e.beforeBreak&&e.beforeBreak()},afterAd:e.afterBreak,beforeReward:e.beforeReward,adDismissed:"reward"===i?e.adDismissed||function(){}:void 0,adViewed:e.adViewed}))}catch(n){c(n,e)}},r.prototype.onMute=function(){adConfig({sound:"off"})},r.prototype.onUnmute=function(){adConfig({sound:"on"})},t.exports=new r},{"./package.json":2}],2:[function(e,t){t.exports={name:"h5ad",version:"1.1.3",description:"Ad API wrapper for GC Turbo hyper casual games",main:"index.js",scripts:{},repository:{type:"git",url:"git+https://github.com/gc-turbo/h5ad.git"},author:"GC Turbo",license:"",bugs:{url:"https://github.com/gc-turbo/h5ad/issues"},homepage:"https://github.com/gc-turbo/h5ad#readme"}},{}],ComboBoxItem:[function(e,t){"use strict";cc._RF.push(t,"e3eb2OoYnVNLpiehtkwiOa4","ComboBoxItem"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},_parentCtrl:null,_data:null},setData:function(e,t){this._parentCtrl=e,this._data=t,this.label.string=LocalizationHelper.getText("label_text."+t.languageName)},onClickItemBtn:function(){this._parentCtrl.onClickItemBtn(),this._data.languageCode!=LocalizationHelper.language&&(LocalizationHelper.setLanguage(this._data.languageCode),this._parentCtrl.comboLabel.string=LocalizationHelper.getText("label_text."+this._data.languageName))}}),cc._RF.pop()},{}],ComboBox:[function(e,t){"use strict";cc._RF.push(t,"654288QCkNOzqcBu3xCbhmH","ComboBox");var i=["English","Japanese"],n=["en","ja"];cc.Class({extends:cc.Component,properties:{triangle:cc.Node,comboLabel:cc.Label,dropDown:cc.Node,vLayoutNode:cc.Node,contentNode:cc.Node,itemPrefab:cc.Prefab},onLoad:function(){this.isDropDown=!1},start:function(){this.comboLabel.string="en"==LocalizationHelper.language?LocalizationHelper.getText("label_text.English"):LocalizationHelper.getText("label_text.Japanese")},onClickItemBtn:function(e){this.rotateTriangle(),this.showHideDropDownBox(),this.isDropDown?this.isDropDown=!1:this.isDropDown=!0,e&&this.initItems()},rotateTriangle:function(){if(this.isDropDown){var e=cc.rotateTo(.5,-90).easing(cc.easeCubicActionOut());this.triangle.runAction(e)}else{var t=cc.rotateTo(.5,0).easing(cc.easeCubicActionOut());this.triangle.runAction(t)}},showHideDropDownBox:function(){this.isDropDown?this.dropDown.active=!1:this.dropDown.active=!0},initItems:function(){this.vLayoutNode.removeAllChildren();for(var e=0;e<i.length;e++){var t=cc.instantiate(this.itemPrefab);t.getComponent("ComboBoxItem").setData(this,{languageName:i[e],languageCode:n[e]}),this.vLayoutNode.addChild(t)}}}),cc._RF.pop()},{}],DataManager:[function(e,t){"use strict";var i;cc._RF.push(t,"6d230WjzGpMpoY8h1MOJbgy","DataManager"),(i=e("./constants"))&&i.__esModule,t.exports.loadData=function(){window.gameData={},cc.resources.load("Data/layout",function(e,t){window.gameData.tableLayout=t.json}),cc.resources.load("Data/tiles",function(e,t){window.gameData.tileTypes=t.json})},t.exports.getLayout=function(){return window.gameData.tableLayout},t.exports.getTileTypes=function(){return window.gameData.tileTypes},cc._RF.pop()},{"./constants":"constants"}],IngamePopupCtor:[function(e,t){"use strict";cc._RF.push(t,"0be6bcpI+hAir+Z+NMC0EJ2","IngamePopupCtor");var i,n=(i=e("./Libs/helpers"))&&i.__esModule?i:{default:i};e("h5ad");var a=e("./DataManager");cc.Class({extends:cc.Component,properties:{overlay:cc.Node,helpPopup:cc.Node,ingameMenu:cc.Node,debriefPopup:cc.Node,debriefFinalScoreText:cc.Label,debriefProgressText:cc.Label,debriefProgressScoreText:cc.Label,debriefRawScoreText:cc.Label},start:function(){},animateOverlayFadeIn:function(){this.overlay.active=!0,this.overlay.opacity=0,cc.tween(this.overlay).to(.2,{opacity:200}).start()},animateOverlayFadeOut:function(){var e=this;this.overlay.opacity=200,cc.tween(this.overlay).to(.3,{opacity:0}).call(function(){e.overlay.active=!1}).start()},animatePopupFadeIn:function(e){e.active=!0,e.displaying=!0,e.opacity=0,cc.tween(e).to(.3,{opacity:255}).start()},animatePopupFadeOut:function(e){e.opacity=255,e.displaying=!1,cc.tween(e).to(.2,{opacity:0}).call(function(){e.active=!1}).start()},reset:function(){this.overlay.active=!1,this.helpPopup.active=!1,this.ingameMenu.active=!1,this.debriefPopup.active=!1},showIngameMenu:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.ingameMenu)},showHelpPopup:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.helpPopup)},showDebriefScreen:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.debriefPopup);var e=1-this.ingameController.tiles.length/a.getLayout().length,t=Math.ceil(this.ingameController.score*e);this.debriefRawScoreText.string=n.default.formatDecimalString(this.ingameController.score),this.debriefProgressScoreText.string=n.default.formatDecimalString(t),this.debriefFinalScoreText.string=n.default.formatDecimalString(this.ingameController.score+t),this.debriefProgressText.string=Math.round(100*e)+"% \u5b8c\u4e86"},onResumeClicked:function(){"on"===a.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.animateOverlayFadeOut(),this.helpPopup.displaying&&this.animatePopupFadeOut(this.helpPopup),this.ingameMenu.displaying&&this.animatePopupFadeOut(this.ingameMenu),this.debriefPopup.displaying&&this.animatePopupFadeOut(this.debriefPopup),this.ingameController.resumeGame()},onQuitClicked:function(){var e=this;cc.director.isPaused()||n.default.showAds("reward",!0,function(t){var i=new Object;i.adType="Reward",i.gameName=n.default.getAppName(),i.gameFeature="rewardAD_rePlay",i.weblinkSource=n.default.getWeblinkSource(),t?n.default.gtaPushEvent("AdShowSuccess",i):n.default.gtaPushEvent("AdShowFail",i),e.ingameController.backToMainMenu()})},onRestartClicked:function(){var e=this;cc.director.isPaused()||("on"===a.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),n.default.showAds("reward",!0,function(t){var i=new Object;i.adType="Reward",i.gameName=n.default.getAppName(),i.gameFeature="rewardAD_rePlay",i.weblinkSource=n.default.getWeblinkSource(),t?n.default.gtaPushEvent("AdShowSuccess",i):n.default.gtaPushEvent("AdShowFail",i),t&&e.ingameController.restartGame()}))}}),cc._RF.pop()},{"./DataManager":"DataManager","./Libs/helpers":"helpers",h5ad:1}],IngameSceneCtor:[function(e,t){"use strict";cc._RF.push(t,"09b929JsbZE6LnNEKlAq2xZ","IngameSceneCtor");var i=l(e("./Models/Tile")),n=l(e("./constants")),a=l(e("./Libs/helpers")),o=l(e("./IngameUICtor")),s=l(e("./IngamePopupCtor")),r=l(e("./DataManager"));function l(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{uiController:o.default,popupController:s.default,loadingText:cc.Label,tableNode:cc.Node,bgSound:cc.AudioClip,clickSound:cc.AudioClip,successMatchSound:cc.AudioClip,tileSelectionSound:cc.AudioClip,tileIllegalSound:cc.AudioClip,tickSound:cc.AudioClip},onLoad:function(){this.uiController.ingameController=this,this.popupController.ingameController=this,this.uiController.popupController=this.popupController,this.popupController.uiController=this.uiController,this.uiController.reset(),this.popupController.reset()},start:function(){var e=this;this.tableNode.setScale(n.default.TABLE_SCALE),this.tableNode.x=n.default.TABLE_OFFSET_X,this.tableNode.y=n.default.TABLE_OFFSET_Y,this.timer=n.default.GAME_DURATION,this.score=0,this.hintRemaining=n.default.GAME_HINT_TIMES,this.shuffleRemaining=n.default.GAME_SHUFFLE_TIMES,this.isPlaying=!1,this.isGameBegan=!1,cc.resources.preloadDir("Tiles",cc.SpriteFrame,function(){e.generateTiles(),e.uiController.hideLoadingText(),e.animateShuffleTiles(function(){e.isPlaying=!0,e.uiController.updateTimer(),e.uiController.updateHint(),e.uiController.updateShuffle()})})},update:function(e){if(this.isPlaying&&this.isGameBegan)if(this.timer-=1e3*e,this.uiController.updateTimer(),this.timer<=0)this.animateTimerTick(),this.endGame();else if(this.timer<1e4){var t=this.timer/1e3;t+e>Math.ceil(t)&&this.animateTimerTick()}},animateTimerTick:function(){cc.audioEngine.play(this.tickSound,!1,.5),this.uiController.animateTimeWarning()},animateShuffleTiles:function(e,t){void 0===t&&(t="in");for(var i=[].concat(this.tiles),n=0,a=0;i.length>0;){var o=i.splice(~~(Math.random()*i.length),1)[0],s=cc.v2();if("out"===t){var r=new cc.v2;cc.Vec2.random(r,1200),s=r.multiplyScalar(1+.2*Math.random())}else s=o.node.position,r=new cc.v2,cc.Vec2.random(r,1200),o.node.position=r.multiplyScalar(1+.5*Math.random());cc.tween(o.node).delay(.012*a).to(.6,{position:s}).start(),++n>=9&&(n=0,a++)}this.scheduleOnce(e,.012*a+.6)},restartGame:function(){cc.audioEngine.stopAll(),cc.director.loadScene("ingame")},backToMainMenu:function(){cc.audioEngine.stopAll(),cc.director.loadScene("landing")},generateTiles:function(){var e=this;window.gameData.flowerCounter=0,window.gameData.seasonCounter=0;for(var t=[],n=0;n<r.default.getTileTypes().length;n++)for(var a=0;a<4;a++)t.push(n);t.length===r.default.getLayout().length?(this.tiles=[],r.default.getLayout().forEach(function(n){var a=~~(Math.random()*t.length),o=t[a];t.splice(a,1);var s=new i.default(e.tableNode,o,n);s.node.on("clicked",e.onTileClicked,e),e.tiles.push(s)}),this.remapTiles(),0===this.validPairs.length&&this.shuffleTiles(!0)):cc.error("Invalid data")},remapTiles:function(){var e=this;this.mappedTiles={},this.tiles.forEach(function(t){e.mappedTiles[a.default.getMappedKeyFromTile(t)]=t}),this.validTiles=[],this.tiles.forEach(function(t){for(var i=!0,o=0;o<n.default.RELATIVE_TOP_BLOCKING_TILES.length;o++){var s=n.default.RELATIVE_TOP_BLOCKING_TILES[o],r=t.position.x+s[0],l=t.position.y+s[1],c=t.position.z+s[2];if(e.mappedTiles[a.default.getMappedKeyFromPosition(r,l,c)]){i=!1;break}}if(i){for(var u=!0,h=!0,d=0;d<n.default.RELATIVE_LEFT_BLOCKING_TILES.length;d++){var p=n.default.RELATIVE_LEFT_BLOCKING_TILES[d];if(r=t.position.x+p[0],l=t.position.y+p[1],c=t.position.z+p[2],e.mappedTiles[a.default.getMappedKeyFromPosition(r,l,c)]){u=!1;break}}for(var f=0;f<n.default.RELATIVE_RIGHT_BLOCKING_TILES.length;f++){var g=n.default.RELATIVE_RIGHT_BLOCKING_TILES[f];if(r=t.position.x+g[0],l=t.position.y+g[1],c=t.position.z+g[2],e.mappedTiles[a.default.getMappedKeyFromPosition(r,l,c)]){h=!1;break}}(u||h)&&e.validTiles.push(a.default.getMappedKeyFromTile(t))}}),this.validPairs=[];for(var t=[].concat(this.validTiles);t.length>0;)for(var i=t.splice(0,1)[0],o=0;o<t.length;o++){var s=t[o];if(this.mappedTiles[s].type===this.mappedTiles[i].type){s=t.splice(o,1)[0],this.validPairs.push([i,s]);break}}this.uiController.updateIngameData()},selectTile:function(e){"on"===r.default.sound&&cc.audioEngine.play(this.tileSelectionSound,!1,1),this.selectedTiles&&this.deselectTile(),this.deHighlightHint(),this.selectedTiles=e,this.selectedTiles.highlight()},scoreTilePair:function(e,t){if(e.type===t.type){"on"===r.default.sound&&cc.audioEngine.play(this.successMatchSound,!1,1);var i=e.type;this.addScore(i),e.destroy(),t.destroy(),this.tiles.splice(this.tiles.indexOf(e),1),this.tiles.splice(this.tiles.indexOf(t),1),this.deselectTile(),this.isGameBegan||(this.isGameBegan=!0,this.timer-=1e3),0===this.tiles.length?this.endGame():(this.remapTiles(),this.checkNoMoreMove())}},addScore:function(e){var t=r.default.getTileTypes()[e][1],i=Math.ceil(.5*t*this.tiles.length);this.score+=i,this.uiController.updateScore()},deselectTile:function(){this.selectedTiles&&this.selectedTiles.dehighlight(),this.selectedTiles=null},highlightHint:function(e,t){this.isHinting&&this.deHighlightHint(),this.isHinting=!0,this.hintPair=[e,t],this.hintPair[0].hintHighlight(),this.hintPair[1].hintHighlight()},deHighlightHint:function(){this.isHinting=!1,this.hintPair&&(this.tiles.includes(this.hintPair[0])&&this.hintPair[0].dehighlight(),this.tiles.includes(this.hintPair[1])&&this.hintPair[1].dehighlight())},shuffleTiles:function(e){var t=this;if(void 0===e&&(e=!1),!e){if(this.isShufling)return;if(!this.isPlaying)return;if(this.shuffleRemaining<=0)return;this.shuffleRemaining--,this.uiController.updateShuffle()}this.deselectTile(),this.deHighlightHint(),this.isShufling=!0,this.isPlaying=!1,this.animateShuffleTiles(function(){var e=0;do{t.remainingLayout=[],t.tiles.forEach(function(e){t.remainingLayout.push([e.position.x,e.position.y,e.position.z])}),t.tiles.forEach(function(e){var i=t.remainingLayout.splice(~~(Math.random()*t.remainingLayout.length),1)[0];e.reposition(i[0],i[1],i[2])}),t.remapTiles(),e++}while(0===t.validPairs.length&&e<10);t.animateShuffleTiles(function(){t.isShufling=!1,t.isPlaying=!0,t.checkNoMoreMove()})},"out")},checkNoMoreMove:function(){var e=this;0===this.validPairs.length&&(this.shuffleRemaining>0?(this.isPlaying=!1,this.uiController.showShuffleNotification("reshuffle"),this.scheduleOnce(function(){e.isPlaying=!0,e.uiController.hideShuffleNotification(),e.shuffleTiles()},1)):(this.isPlaying=!1,this.uiController.showShuffleNotification("end"),this.scheduleOnce(function(){e.isPlaying=!0,e.uiController.hideShuffleNotification(),e.endGame()},1)))},showHintPair:function(){this.isPlaying&&(this.validPairs.length<=0||this.hintRemaining<=0||(this.hintRemaining--,this.uiController.updateHint(),isNaN(this.hintPairIter)&&(this.hintPairIter=0),this.hintPairIter=++this.hintPairIter%this.validPairs.length,this.deselectTile(),this.highlightHint(this.mappedTiles[this.validPairs[this.hintPairIter][0]],this.mappedTiles[this.validPairs[this.hintPairIter][1]])))},endGame:function(){this.isPlaying=!1,this.popupController.showDebriefScreen()},pauseGame:function(){this.isPlaying=!1},resumeGame:function(){this.isPlaying=!0},onTileClicked:function(e){this.isPlaying&&(this.validTiles.includes(a.default.getMappedKeyFromTile(e))?this.selectedTiles?e===this.selectedTiles?this.deselectTile():e.type===this.selectedTiles.type?this.scoreTilePair(e,this.selectedTiles):this.selectTile(e):this.selectTile(e):("on"===r.default.sound&&cc.audioEngine.play(this.tileIllegalSound,!1,1),e.illegalHighlight()))}}),cc._RF.pop()},{"./DataManager":"DataManager","./IngamePopupCtor":"IngamePopupCtor","./IngameUICtor":"IngameUICtor","./Libs/helpers":"helpers","./Models/Tile":"Tile","./constants":"constants"}],IngameUICtor:[function(e,t){"use strict";cc._RF.push(t,"653c2FywYdLE5u3WI75R5Eh","IngameUICtor"),o(e("./IngameSceneCtor")),o(e("./IngamePopupCtor"));var i=o(e("./Libs/helpers")),n=o(e("./constants")),a=o(e("./DataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{pairText:cc.Label,timeText:cc.Label,scoreText:cc.Label,tilesText:cc.Label,shuffleRemainingText:cc.Label,hintRemainingText:cc.Label,loadingText:cc.Label,shuffleNotificationText:cc.Label,shuffleButton:cc.Button,hintButton:cc.Button,helpButton:cc.Button,pauseButton:cc.Button},start:function(){},reset:function(){this.loadingText.node.active=!0,this.shuffleNotificationText.node.active=!1,this.pairText.string="0",this.timeText.string="00:00",this.scoreText.string="0",this.tilesText.string="0",this.shuffleRemainingText.node.opacity=255,this.shuffleRemainingText.string="0x",this.hintRemainingText.node.opacity=255,this.hintRemainingText.string="0x",this.shuffleButton.interactable=!0,this.hintButton.interactable=!0},hideLoadingText:function(){var e=this;cc.tween(this.loadingText.node).to(.4,{opacity:0}).call(function(){e.loadingText.node.active=!1}).start()},animateTimeWarning:function(){cc.tween(this.timeText.node).to(.25,{color:new cc.color(n.default.UI_WARNING_COLOR),scale:1.2}).to(.25,{color:new cc.color(n.default.UI_WHITE_COLOR),scale:1}).start()},disableShuffle:function(){this.shuffleRemainingText.node.opacity=128,this.shuffleButton.interactable=!1},disableHint:function(){this.hintRemainingText.node.opacity=128,this.hintButton.interactable=!1},updateIngameData:function(){this.pairText.string=this.ingameController.validPairs.length,this.tilesText.string=this.ingameController.tiles.length,this.pairText.node.color=this.ingameController.validPairs.length>n.default.LOW_MATCHING_TILE_WARNING_THRESHOLD?cc.color(n.default.UI_WHITE_COLOR):cc.color(n.default.UI_WARNING_COLOR)},updateShuffle:function(){this.shuffleRemainingText.string=this.ingameController.shuffleRemaining+"x",0===this.ingameController.shuffleRemaining&&this.disableShuffle()},updateHint:function(){this.hintRemainingText.string=this.ingameController.hintRemaining+"x",0===this.ingameController.hintRemaining&&this.disableHint()},updateTimer:function(){this.timeText.string=i.default.formatTimer(this.ingameController.timer)},updateScore:function(){this.scoreText.string=i.default.formatDecimalString(this.ingameController.score)},showShuffleNotification:function(e){"reshuffle"===e?this.shuffleNotificationText.string="\u30de\u30c3\u30c1\u53ef\u80fd\u306a\u30da\u30a2\u306f\u3042\u308a\u307e\u305b\u3093\n\u518d\u30b7\u30e3\u30c3\u30d5\u30eb...":"end"===e&&(this.shuffleNotificationText.string="\u30de\u30c3\u30c1\u53ef\u80fd\u306a\u30da\u30a2\u306f\u3042\u308a\u307e\u305b\u3093\n\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc"),this.shuffleNotificationText.node.active=!0,this.shuffleNotificationText.node.opacity=0,this.shuffleNotificationText.node.y=-80,this.shuffleNotificationTween&&this.shuffleNotificationTween.stop(),this.shuffleNotificationTween=cc.tween(this.shuffleNotificationText.node).to(.4,{opacity:255,y:0}).start()},hideShuffleNotification:function(){var e=this;this.shuffleNotificationTween&&this.shuffleNotificationTween.stop(),this.shuffleNotificationTween=cc.tween(this.shuffleNotificationText.node).to(.4,{opacity:0,y:100}).call(function(){e.shuffleNotificationText.node.active=!1}).start()},onHintClicked:function(){"on"===a.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.ingameController.showHintPair()},onShuffleClicked:function(){"on"===a.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.ingameController.shuffleTiles()},onPauseClicked:function(){"on"===a.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.popupController.showIngameMenu()},onHelpClicked:function(){"on"===a.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.popupController.showHelpPopup()}}),cc._RF.pop()},{"./DataManager":"DataManager","./IngamePopupCtor":"IngamePopupCtor","./IngameSceneCtor":"IngameSceneCtor","./Libs/helpers":"helpers","./constants":"constants"}],LandingSceneCtor:[function(e,t){"use strict";cc._RF.push(t,"ecadavH4rRILZ0IR5weO34P","LandingSceneCtor"),a(e("./constants"));var i=a(e("./DataManager")),n=a(e("./Libs/LocalizationHelper"));function a(e){return e&&e.__esModule?e:{default:e}}var o=e("h5ad"),s=e("./Libs/helpers");cc.Class({extends:cc.Component,properties:{loadingOverlay:cc.Node,clickSound:cc.AudioClip},onLoad:function(){n.default.init(),s.gtaInit("321085","0033cb7f59e3cd9a32e9a1abd8807afa");var e={weblinkSource:s.getWeblinkSource(),gameName:s.getAppName(),version:"1.0.0"};s.gtaSetUserProperties(e),s.gtaPushEvent("gameSession",e),o.onStart({icon:s.getResourceUrl("icon"),color:"#4C693E",afterBreak:function(){var e=new Object;e.adType="Interstitial",e.gameName=s.getAppName(),e.weblinkSource=s.getWeblinkSource(),e.gameFeature="interstitialAD_start",s.gtaPushEvent("AdShowSuccess",e)},adBreakTimeout:3e3}),i.default.loadData()},start:function(){this.loadingOverlay.active=!1},onPlayClicked:function(){"on"===i.default.sound&&cc.audioEngine.play(this.clickSound,!1,1),this.loadingOverlay.active=!0,this.loadingOverlay.opacity=0,cc.tween(this.loadingOverlay).to(.4,{opacity:200}).call(function(){cc.director.loadScene("ingame")}).start()}}),cc._RF.pop()},{"./DataManager":"DataManager","./Libs/LocalizationHelper":"LocalizationHelper","./Libs/helpers":"helpers","./constants":"constants",h5ad:1}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var i=e("polyglot.min"),n=null;function a(e){return window.i18n.languages[e]}function o(e){e&&(n?n.replace(e):n=new i({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=a(e)||{};window.i18n.curLang=e,o(t),this.inst=n}},t:function(e,t){if(n)return n.t(e,t)},inst:n,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],i=0;i<e.length;++i){var n=e[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n)}for(var a=0;a<t.length;++a){var o=t[a];o.node.active&&o.updateLabel()}for(var s=[],r=0;r<e.length;++r){var l=e[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,l)}for(var c=0;c<s.length;++c){var u=s[c];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizationHelper:[function(e,t){"use strict";cc._RF.push(t,"fe46fQs9fJFnZhJJkECJfLR","LocalizationHelper");var i=function(){function t(){this.languageData=null}var i=t.prototype;return i.init=function(){this.language=cc.sys.localStorage.getItem("mahjongsolitaire_lang"),this.language||(this.language=this._getBrowserLanguage()),cc.sys.localStorage.setItem("mahjongsolitaire_lang",this.language),this.languageData=e("LanguageData"),this.languageData.init(this.language)},i.getText=function(e){return this.languageData.t(e)},i.setLanguage=function(e){this.language=e,cc.sys.localStorage.setItem("mahjongsolitaire_lang",this.language),this.languageData.init(this.language),this.languageData.updateSceneRenderers()},i._getBrowserLanguage=function(){var e,t,i=window.navigator,n=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(i.languages))for(e=0;e<i.languages.length;e++)if((t=i.languages[e])&&t.length)return t.slice(0,2);for(e=0;e<n.length;e++)if((t=i[n[e]])&&t.length)return t.slice(0,2);return null},t}();t.exports=new i,window.LocalizationHelper=e("LocalizationHelper"),cc._RF.pop()},{LanguageData:"LanguageData",LocalizationHelper:"LocalizationHelper"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var i=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){i.inst||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?i.t(this.dataID)&&(this.label.string=i.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var i=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:i}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MusicButton:[function(e,t){"use strict";cc._RF.push(t,"66db6+NtctLe5pKkkfqo5gU","MusicButton");var i,n=(i=e("./DataManager"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{onTexture:cc.SpriteFrame,offTexture:cc.SpriteFrame,sprite:cc.Sprite,bgSound:cc.AudioClip},onLoad:function(){n.default.sound=cc.sys.localStorage.getItem("music"),null===n.default.sound&&(n.default.sound="on"),this.updateMusicToggle()},onMusicClicked:function(){n.default.sound="on"===n.default.sound?"off":"on",this.updateMusicToggle()},updateMusicToggle:function(){this.sprite.spriteFrame="on"===n.default.sound?this.onTexture:this.offTexture,cc.sys.localStorage.setItem("music",n.default.sound),cc.audioEngine.isMusicPlaying()&&"off"===n.default.sound?cc.audioEngine.stopAll():cc.audioEngine.isMusicPlaying()||"on"!==n.default.sound||cc.audioEngine.playMusic(this.bgSound,!0,.4)},start:function(){}}),cc._RF.pop()},{"./DataManager":"DataManager"}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var i=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=i,cc._RF.pop()},{}],Tile:[function(e,t,i){"use strict";cc._RF.push(t,"efb04ZQ94hEEa50v5D1+G4y","Tile"),i.__esModule=!0,i.default=void 0;var n,a=(n=e("../constants"))&&n.__esModule?n:{default:n},o=e("../DataManager"),s=function(){function e(e,t,i){this.node=new cc.Node("Sprite"),this.view=this.node.addComponent(cc.Sprite),this.node.parent=e,this.node.on(cc.Node.EventType.TOUCH_START,this.onclick.bind(this),this),this.type=t,this.position={},this.position.x=i[1],this.position.y=i[2],this.position.z=i[3];var n=o.getTileTypes()[this.type][0];"Flower"===n?(n=n+"_"+a.default.TILE_FLOWER_THEME[window.gameData.flowerCounter],window.gameData.flowerCounter++):"Season"===n&&(n=n+"_"+a.default.TILE_SEASON_THEME[window.gameData.seasonCounter],window.gameData.seasonCounter++),this.updateWorldPosition(),cc.resources.load("Tiles/"+n,cc.SpriteFrame,function(e,t){t.addRef(),this.view.spriteFrame=t}.bind(this))}var t=e.prototype;return t.updateWorldPosition=function(){this.node.x=this.position.x*(a.default.TILE_WIDTH/2-a.default.TILE_OFFSET_X)+this.position.z*a.default.TILE_STACK_OFFSET_X,this.node.y=this.position.y*(a.default.TILE_HEIGHT/2-a.default.TILE_OFFSET_TOP_Y)-this.position.z*a.default.TILE_STACK_OFFSET_Y,this.node.setContentSize(a.default.TILE_WIDTH,a.default.TILE_HEIGHT),this.node.zIndex=1e3*this.position.z+(1e3-100*this.position.y)+10*this.position.x},t.reposition=function(e,t,i){this.position={},this.position.x=e,this.position.y=t,this.position.z=i,this.updateWorldPosition()},t.hintHighlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).repeat(5,cc.tween().to(.5,{color:new cc.color(a.default.TILE_HINT_COLOR)}).to(.5,{color:new cc.color("#FFFFFF")})).start()},t.illegalHighlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(.2,{color:new cc.color(a.default.TILE_ILLEGAL_COLOR)}).to(.2,{color:new cc.color("#FFFFFF")}).start()},t.highlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(.2,{color:new cc.color(a.default.TILE_HIGHTLIGHT_COLOR)}).start()},t.dehighlight=function(){this.tween&&(this.tween.stop(),cc.tween(this.node).to(.2,{color:new cc.color("#FFFFFF")}).start())},t.destroy=function(){var e=this;this.tween&&this.tween.stop(),cc.tween(this.node).to(.4,{opacity:{value:0,easing:"sineOut"},y:{value:this.node.y+120,easing:"sineIn"}}).start(),this.view.scheduleOnce(function(){e.node.destroy()},.4)},t.onclick=function(e){e.stopPropagation(),this.node.emit("clicked",this)},e}();i.default=s,t.exports=i.default,cc._RF.pop()},{"../DataManager":"DataManager","../constants":"constants"}],constants:[function(e,t,i){"use strict";cc._RF.push(t,"ad93eoF2JtAnLaSo8UmrzRb","constants"),i.__esModule=!0,i.default=void 0,i.default={GAME_DURATION:6e5,GAME_HINT_TIMES:3,GAME_SHUFFLE_TIMES:3,TABLE_SCALE:.42,TABLE_OFFSET_X:-15,TABLE_OFFSET_Y:-15,TILE_WIDTH:86,TILE_HEIGHT:124,TILE_STACK_OFFSET_X:0,TILE_STACK_OFFSET_Y:-12,TILE_OFFSET_X:2,TILE_OFFSET_TOP_Y:9,TILE_PER_TYPE:4,TILE_SEASON_THEME:["Spring","Summer","Autumn","Winter"],TILE_FLOWER_THEME:["Type1","Type2","Type3","Type4"],TILE_HIGHTLIGHT_COLOR:"#8EB7FF",TILE_HINT_COLOR:"#00FF00",TILE_ILLEGAL_COLOR:"#FF716B",LOW_MATCHING_TILE_WARNING_THRESHOLD:3,UI_WHITE_COLOR:"#FEFEFE",UI_WARNING_COLOR:"#886033",RELATIVE_TOP_BLOCKING_TILES:[[0,0,1],[1,1,1],[1,-1,1],[-1,1,1],[-1,-1,1]],RELATIVE_LEFT_BLOCKING_TILES:[[-2,0,0],[-2,1,0],[-2,-1,0]],RELATIVE_RIGHT_BLOCKING_TILES:[[2,0,0],[2,1,0],[2,-1,0]]},t.exports=i.default,cc._RF.pop()},{}],helpers:[function(e,t){"use strict";cc._RF.push(t,"27317LYnohKlLhuyXz/wavH","helpers");var i=e("h5ad");t.exports.getMappedKeyFromTile=function(e){return this.getMappedKeyFromPosition(e.position.x,e.position.y,e.position.z)},t.exports.getMappedKeyFromPosition=function(e,t,i){return e+"_"+t+"_"+i},t.exports.formatDurationDHMSObject=function(e){e=Math.max(0,e);var t=Math.ceil(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60),a=Math.floor(n/24);return{seconds:t%=60,minutes:i%=60,hours:n%=24,days:a}},t.exports.formatTimer=function(e){var t=this.formatDurationDHMSObject(e),i=t.seconds,n=t.minutes,a=t.hours,o=t.days,s=n>9||0===a?n:"0"+n,r=i>9?i:"0"+i;return o>=1?o+":"+a+":"+n+":"+i:a>=1?a+":"+s+":"+r:s+":"+r},t.exports.formatDecimalString=function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},t.exports.showAds=function(e,t,n){var a=new Object;a.type=e,a.beforeBreak=function(){console.log("beforeBreak"),t&&(cc.director.pause(),cc.audioEngine.pauseAll())},a.afterBreak=function(){console.log("afterBreak"),t&&(cc.director.resume(),cc.audioEngine.resumeAll()),"reward"!=e&&n&&n(!0)},"reward"==e&&(a.beforeReward=function(e){console.log("beforeReward"),e()}),a.adDismissed=function(){console.log("adDismissed"),n&&n(!1)},"reward"==e&&(a.adViewed=function(){console.log("adViewed"),n&&n(!0)}),a.noBreak=function(){console.log("noBreak"),t&&(cc.director.resume(),cc.audioEngine.resumeAll()),n&&n(!0)},i.adBreak(a)},t.exports.getResourceUrl=function(e){var t=cc.resources.getInfoWithPath(e),i=t.uuid;return t.nativeVer&&(i+="."+t.nativeVer),"./assets/resources/native/"+i.substr(0,2)+"/"+i+".png"},t.exports.gtaInit=function(e,t){console.log("init:",e+" ** "+t);var i={gameId:e,version:"1.0.0",debugLog:!0,amplitude:{apiKey:t,debugLog:!0}};gcTurboAnalytics.init(i)},t.exports.gtaSendBaseUserProperties=function(){var e=new Object;e.version="1.0.0",gcTurboAnalytics.setUserProperties(e)},t.exports.gtaSetUserProperties=function(e){gcTurboAnalytics.setUserProperties(e)},t.exports.gtaPushEvent=function(e,t){gcTurboAnalytics.pushEvent(e,t)},t.exports.getAppName=function(){return"Mahjong"},t.exports.getWeblinkSource=function(){return document?document.referrer||document.URL:"Unknown"},cc._RF.pop()},{h5ad:1}],"polyglot.min":[function(e,t,i){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof i?t.exports=n(e):e.Polyglot=n(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||l}function i(e){var t,i,n,a={};for(t in e)if(e.hasOwnProperty(t))for(n in i=e[t])a[i[n]]=t;return a}function n(e){return e.replace(/^\s+|\s+$/g,"")}function a(e,t,i){var a;return null!=i&&e?n((a=e.split(u))[s(t,i)]||a[0]):e}function o(e){var t=i(d);return t[e]||t.en}function s(e,t){return h[o(e)](t)}function r(e,t){for(var i in t)"_"!==i&&t.hasOwnProperty(i)&&(e=e.replace(new RegExp("%\\{"+i+"\\}","g"),t[i]));return e}function l(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function c(e){var t={};for(var i in e)t[i]=e[i];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var i;for(var n in e)e.hasOwnProperty(n)&&(i=e[n],t&&(n=t+"."+n),"object"==typeof i?this.extend(i,n):this.phrases[n]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var i,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?i=this.phrases[e]:"string"==typeof t._?i=t._:this.allowMissing?i=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof i&&(t=c(t),n=r(n=a(i,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var u="||||",h={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}]},{},["DataManager","IngamePopupCtor","IngameSceneCtor","IngameUICtor","LandingSceneCtor","ComboBox","ComboBoxItem","LocalizationHelper","helpers","Tile","MusicButton","constants","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);